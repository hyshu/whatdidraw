# What Did I Draw?

Redditアプリとして作られた、楽しいお絵描きクイズゲームです。自分で絵を描いて他のユーザーに当ててもらったり、他のユーザーが作ったクイズに挑戦したりできます！

## 機能

### 🎨 Create Drawing（お絵描き）

他のユーザー向けにクイズを作成できます：

- 複数の色とブラシサイズを使える直感的なキャンバス
- 答えを設定（1〜50文字、必須）
- ヒントを追加（0〜100文字、オプション）でプレイヤーをサポート
- 絵を保存してサブレディットに投稿

### 🎮 Play Quiz（クイズに挑戦）

他のプレイヤーの絵を見て当てる力を試しましょう：

- 絵をストローク毎に見るか、一気に全て見るか選択可能
- 早く当てるほど、少ないストロークで当てるほど高得点
- **不正防止機能**：
  - **自分が作ったクイズに回答すると0点になります**
  - あまりに早く（ストロークをほとんど見ずに）回答すると**0点になります**
- **一度答えたクイズには二度と回答できません** - 各クイズは1プレイヤーにつき1回のみ挑戦可能

### 🏆 Ranking & Leaderboard（ランキング＆リーダーボード）

あなたの進捗を追跡し、他のユーザーと競い合いましょう：

- **Global Ranking（グローバルランキング）**：全クイズを通じたトッププレイヤーを表示
- **Subreddit Ranking（サブレディットランキング）**：各サブレディット固有のランキングを表示
- **My History（マイヒストリー）**：あなたが回答した全クイズをスコアとタイムスタンプ付きで確認

### 📤 Share to Subreddit（サブレディットに投稿）

絵を作成した後：

- アプリがインストールされているサブレディットにクイズを投稿
- 他のユーザーがあなたのクイズを発見してプレイ可能
- コミュニティが作成した挑戦問題のコレクションを構築

## はじめ方

### 必要なもの

- Node.js（v18以上を推奨）
- Redditアカウント
- Devvit CLIのインストール

### インストール

1. リポジトリをクローン：
```bash
git clone <repository-url>
cd whatdidraw
```

2. 依存関係をインストール：
```bash
npm install
```

### ローカルで実行

開発モードでアプリを実行するには：

```bash
npm run dev
```

これにより以下が起動します：
- クライアントのウォッチモードビルド
- サーバーのウォッチモードビルド
- Devvitプレイテストサーバー

### 本番環境用ビルド

デプロイ用にアプリをビルドするには：

```bash
npm run build
```

### Redditにデプロイ

1. Devvitにログイン：
```bash
npm run login
```

2. アプリをアップロード：
```bash
npm run deploy
```

3. アプリを公開：
```bash
npm run launch
```

## スクリプト

- `npm run dev` - ホットリロード付き開発サーバーを起動
- `npm run build` - クライアントとサーバーを本番用にビルド
- `npm test` - テストスイートを実行
- `npm run type-check` - TypeScriptの型チェックを実行
- `npm run lint` - コードベースをLint
- `npm run deploy` - ビルドしてDevvitにアップロード
- `npm run launch` - ビルド、デプロイ、公開を一括実行

## スコアの仕組み

クイズに正解した場合：

- **基本スコア**：（総ストローク数 - 閲覧したストローク数）× 100
- **タイムボーナス**：max(0, (60 - 経過秒数)) × 10
- **合計スコア**：基本スコア + タイムボーナス

以下の場合は**0点**となります：
- 自分が作ったクイズに回答した場合
- あまりに早く回答した場合（3秒未満、またはストロークの10%未満しか見ていない）
- 不正解の場合

## ライセンス

BSD-3-Clause
